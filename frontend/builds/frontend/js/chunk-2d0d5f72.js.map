{"version":3,"sources":["webpack:///./src/components/user-preferences/GeneralPreferences.vue","webpack:///src/components/user-preferences/GeneralPreferences.vue","webpack:///./src/components/user-preferences/GeneralPreferences.vue?3a17","webpack:///./src/components/user-preferences/GeneralPreferences.vue?f08d"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","$t","attrs","languageOptions","on","onLanguageChange","model","value","selectedLanguage","callback","$$v","expression","showLanguageChangeMessage","_e","directives","name","rawName","redirectEnabled","domProps","Array","isArray","_i","$event","$$a","$$el","target","$$c","checked","$$i","concat","slice","staticRenderFns","normalizeLanguage","lang","normalized","replace","toLowerCase","supportedCodes","startsWith","includes","baseLang","split","langMap","getCurrentLanguage","i18nLang","i18n","language","savedLanguage","getLocalPref","backendLang","LANGUAGE_OPTIONS","text","props","errorMessages","type","Object","required","saving","user","data","watch","newVal","prevVal","setLocalPref","created","methods","newLanguage","previousLanguage","setTimeout","component"],"mappings":"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","file":"js/chunk-2d0d5f72.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"personalization\"},[_c('h2',{staticClass:\"section-title\"},[_vm._v(_vm._s(_vm.$t(\"General\")))]),_c('div',{staticClass:\"form-group row mt-3\"},[_c('label',{staticClass:\"col-md-2 col-sm-3 col-form-label\"},[_vm._v(_vm._s(_vm.$t(\"Language\")))]),_c('div',{staticClass:\"col-sm-9 col-md-10\"},[_c('b-form-select',{staticClass:\"form-control\",attrs:{\"id\":\"language-select\",\"options\":_vm.languageOptions},on:{\"change\":_vm.onLanguageChange},model:{value:(_vm.selectedLanguage),callback:function ($$v) {_vm.selectedLanguage=$$v},expression:\"selectedLanguage\"}}),(_vm.showLanguageChangeMessage)?_c('div',{staticClass:\"mt-2\"},[_c('div',{staticClass:\"alert alert-warning mb-0\",attrs:{\"role\":\"alert\"}},[_c('i',{staticClass:\"fas fa-exclamation-triangle mr-2\"}),_vm._v(\" \"+_vm._s(_vm.$t(\"Language preference saved. Please refresh the page to apply the changes.\"))+\" \")])]):_vm._e()],1)]),_c('div',{staticClass:\"form-group row mt-3\"},[_c('label',{staticClass:\"col-md-2 col-sm-3 col-form-label\"},[_vm._v(_vm._s(_vm.$t(\"Printers\")))]),_c('div',{staticClass:\"col-sm-9 col-md-10 col-form-label\"},[_c('div',{staticClass:\"custom-control custom-checkbox form-check-inline system-theme-control\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.redirectEnabled),expression:\"redirectEnabled\"}],staticClass:\"custom-control-input\",attrs:{\"id\":\"id_theme_system\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.redirectEnabled)?_vm._i(_vm.redirectEnabled,null)>-1:(_vm.redirectEnabled)},on:{\"change\":function($event){var $$a=_vm.redirectEnabled,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.redirectEnabled=$$a.concat([$$v]))}else{$$i>-1&&(_vm.redirectEnabled=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.redirectEnabled=$$c}}}}),_c('label',{staticClass:\"custom-control-label\",attrs:{\"for\":\"id_theme_system\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"Land directly on the printer control page if I have only 1 printer\"))+\" \"),_c('br'),_c('span',{staticClass:\"text-muted setting-description\"},[_vm._v(_vm._s(_vm.$t(\"This option will be ignored if you have multiple printers. In this case, you will always land on the printer overview page.\")))])])])]),_c('a',{staticClass:\"col-sm-9 col-md-10 col-form-label\",attrs:{\"href\":\"/ent/printers/archived/\"}},[_vm._v(_vm._s(_vm.$t(\"View Archived Printers\")))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"personalization\">\n    <h2 class=\"section-title\">{{ $t(\"General\") }}</h2>\n    <div class=\"form-group row mt-3\">\n      <label class=\"col-md-2 col-sm-3 col-form-label\">{{ $t(\"Language\") }}</label>\n      <div class=\"col-sm-9 col-md-10\">\n        <b-form-select\n          id=\"language-select\"\n          v-model=\"selectedLanguage\"\n          :options=\"languageOptions\"\n          class=\"form-control\"\n          @change=\"onLanguageChange\"\n        ></b-form-select>\n        <div v-if=\"showLanguageChangeMessage\" class=\"mt-2\">\n          <div class=\"alert alert-warning mb-0\" role=\"alert\">\n            <i class=\"fas fa-exclamation-triangle mr-2\"></i>\n            {{ $t(\"Language preference saved. Please refresh the page to apply the changes.\") }}\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"form-group row mt-3\">\n      <label class=\"col-md-2 col-sm-3 col-form-label\">{{ $t(\"Printers\") }}</label>\n      <div class=\"col-sm-9 col-md-10 col-form-label\">\n        <div class=\"custom-control custom-checkbox form-check-inline system-theme-control\">\n          <input\n            id=\"id_theme_system\"\n            v-model=\"redirectEnabled\"\n            type=\"checkbox\"\n            class=\"custom-control-input\"\n          />\n          <label class=\"custom-control-label\" for=\"id_theme_system\">\n            {{$t(\"Land directly on the printer control page if I have only 1 printer\")}}\n            <br />\n            <span class=\"text-muted setting-description\"\n              >{{$t(\"This option will be ignored if you have multiple printers. In this case, you will always land on the printer overview page.\")}}</span\n            >\n          </label>\n        </div>\n      </div>\n      <a class=\"col-sm-9 col-md-10 col-form-label\" href=\"/ent/printers/archived/\"\n        >{{ $t(\"View Archived Printers\") }}</a\n      >\n    </div>\n  </section>\n</template>\n\n<script>\nimport { getLocalPref, setLocalPref } from '@src/lib/pref'\nimport i18n from '@src/i18n/i18n.js'\nimport { language } from '@src/lib/page-context'\n\nconst normalizeLanguage = (lang) => {\n  if (!lang) return 'en';\n\n  // Normalize format (replace underscores with hyphens, lowercase for comparison)\n  const normalized = lang.replace(/_/g, '-').toLowerCase();\n\n  // Check if it's already one of our supported codes (case-insensitive)\n  const supportedCodes = {\n    'en': 'en',\n    'zh-cn': 'zh-CN',\n    'zh-tw': 'zh-TW',\n    'ca': 'ca',\n    'cs': 'cs',\n    'de': 'de',\n    'es': 'es',\n    'fr': 'fr',\n    'hu': 'hu',\n    'it': 'it',\n    'ja': 'ja',\n    'ko': 'ko',\n    'nl': 'nl',\n    'pl': 'pl',\n    'pt-br': 'pt-BR',\n    'ru': 'ru',\n    'sv': 'sv',\n    'tr': 'tr',\n    'uk': 'uk',\n  };\n\n  if (supportedCodes[normalized]) {\n    return supportedCodes[normalized];\n  }\n\n  // Handle Chinese variants\n  if (normalized.startsWith('zh')) {\n    if (normalized.includes('hant') || normalized.includes('tw') || normalized.includes('traditional')) {\n      return 'zh-TW';\n    }\n    return 'zh-CN';\n  }\n\n  // Extract base language code (e.g., \"en-US\" -> \"en\", \"pt-BR\" -> \"pt\")\n  const baseLang = normalized.split('-')[0];\n\n  // Map base language codes to our supported codes\n  const langMap = {\n    'en': 'en',\n    'ca': 'ca',\n    'cs': 'cs',\n    'de': 'de',\n    'es': 'es',\n    'fr': 'fr',\n    'hu': 'hu',\n    'it': 'it',\n    'ja': 'ja',\n    'ko': 'ko',\n    'nl': 'nl',\n    'pl': 'pl',\n    'pt': 'pt-BR', // Portuguese defaults to Brazilian Portuguese\n    'ru': 'ru',\n    'sv': 'sv',\n    'tr': 'tr',\n    'uk': 'uk',\n  };\n\n  return langMap[baseLang] || 'en';\n};\n\nconst getCurrentLanguage = () => {\n  // First check i18n's current language (which already handles localStorage)\n  const i18nLang = i18n.language;\n  if (i18nLang) {\n    return normalizeLanguage(i18nLang);\n  }\n\n  // Fall back to saved preference\n  const savedLanguage = getLocalPref('user-language', null);\n  if (savedLanguage) {\n    return normalizeLanguage(savedLanguage);\n  }\n\n  // Finally fall back to backend page context\n  const backendLang = language();\n  return normalizeLanguage(backendLang);\n};\n\nconst LANGUAGE_OPTIONS = [\n  { value: 'en', text: 'English' },\n  { value: 'zh-CN', text: '简体中文 (Simplified Chinese)' },\n  { value: 'zh-TW', text: '繁體中文 (Traditional Chinese)' },\n  { value: 'ca', text: 'Català (Catalan)' },\n  { value: 'cs', text: 'Čeština (Czech)' },\n  { value: 'de', text: 'Deutsch (German)' },\n  { value: 'es', text: 'Español (Spanish)' },\n  { value: 'fr', text: 'Français (French)' },\n  { value: 'hu', text: 'Magyar (Hungarian)' },\n  { value: 'it', text: 'Italiano (Italian)' },\n  { value: 'ja', text: '日本語 (Japanese)' },\n  { value: 'ko', text: '한국어 (Korean)' },\n  { value: 'nl', text: 'Nederlands (Dutch)' },\n  { value: 'pl', text: 'Polski (Polish)' },\n  { value: 'pt-BR', text: 'Português (Brasil) (Brazilian Portuguese)' },\n  { value: 'ru', text: 'Русский (Russian)' },\n  { value: 'sv', text: 'Svenska (Swedish)' },\n  { value: 'tr', text: 'Türkçe (Turkish)' },\n  { value: 'uk', text: 'Українська (Ukrainian)' },\n];\n\nexport default {\n  name: 'GeneralPreferences',\n\n  props: {\n    errorMessages: {\n      type: Object,\n      required: true,\n    },\n    saving: {\n      type: Object,\n      required: true,\n    },\n    user: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      redirectEnabled: true,\n      selectedLanguage: getCurrentLanguage(),\n      languageOptions: LANGUAGE_OPTIONS,\n      showLanguageChangeMessage: false,\n    }\n  },\n\n  watch: {\n    redirectEnabled: function (newVal, prevVal) {\n      setLocalPref('single-printer-redirect-enabled', newVal)\n    },\n  },\n\n  created() {\n    this.redirectEnabled = getLocalPref('single-printer-redirect-enabled', true)\n    this.selectedLanguage = getCurrentLanguage()\n  },\n\n  methods: {\n    onLanguageChange(newLanguage) {\n      if (!newLanguage) return\n\n      const previousLanguage = getLocalPref('user-language', null)\n\n      // Only show message if language actually changed\n      if (previousLanguage !== newLanguage) {\n        setLocalPref('user-language', newLanguage)\n        this.showLanguageChangeMessage = true\n\n        // Hide message after 10 seconds\n        setTimeout(() => {\n          this.showLanguageChangeMessage = false\n        }, 10000)\n      }\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeneralPreferences.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeneralPreferences.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GeneralPreferences.vue?vue&type=template&id=8a7849fa&\"\nimport script from \"./GeneralPreferences.vue?vue&type=script&lang=js&\"\nexport * from \"./GeneralPreferences.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}