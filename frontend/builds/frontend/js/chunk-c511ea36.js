(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c511ea36"],{"037c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("notification-channel-template",{attrs:{errorMessages:t.errorMessages,saving:t.saving,notificationChannel:t.notificationChannel,showSettings:t.setupCompleted},on:{createNotificationChannel:function(e,n){return t.$emit("createNotificationChannel",e,n)},updateNotificationChannel:function(e,n){return t.$emit("updateNotificationChannel",e,n)},deleteNotificationChannel:function(e){return t.$emit("deleteNotificationChannel",e)},clearErrorMessages:function(e){return t.$emit("clearErrorMessages",e)}},scopedSlots:t._u([{key:"header",fn:function(){return[n("small",{staticClass:"form-text text-muted"},[t._v(" Login to be notified by our Telegram bot. ")]),n("br"),n("div",{staticClass:"form-group row"},[t.notificationChannel.channelInfo&&t.notificationChannel.channelInfo.config&&t.notificationChannel.channelInfo.config.chat_id?n("div",[n("div",{staticClass:"col-12"},[n("div",{staticClass:"btn btn-sm btn-primary float-left mr-2",on:{click:t.onTelegramLogout}},[t._v("Unlink Telegram")]),n("div",{staticClass:"btn btn-sm btn-primary float-left",on:{click:function(e){return t.onTelegramTest(e)}}},[t._v("Test Telegram Notification")])])]):n("div",[n("div",{staticClass:"col-12"},[n("vue-telegram-login",{attrs:{mode:"callback","telegram-login":t.notificationChannel.pluginInfo.env_vars.TELEGRAM_BOT_NAME.value,"request-access":"write"},on:{callback:t.onTelegramAuth}})],1)])])]},proxy:!0}])})},a=[],o=n("9897"),s=n("bc3a"),r=n.n(s),c=n("c7f6"),l=n("d226"),f={name:"telegram",components:{NotificationChannelTemplate:o["a"],vueTelegramLogin:l["vueTelegramLogin"]},props:{errorMessages:{type:Object,required:!0},saving:{type:Object,required:!0},notificationChannel:{type:Object,required:!0},config:{type:Object,required:!0}},computed:{setupCompleted:function(){var t,e;return!!(null===(t=this.notificationChannel.channelInfo)||void 0===t||null===(e=t.config)||void 0===e?void 0:e.chat_id)}},methods:{onTelegramAuth:function(t){var e={chat_id:JSON.stringify(t.id)};this.$emit("createNotificationChannel",this.notificationChannel,e)},onTelegramLogout:function(){this.$emit("deleteNotificationChannel",this.notificationChannel)},onTelegramTest:function(t){var e=this;return t.target.classList.add("disabled"),r.a.post(c["a"].testNotificationChannel(this.notificationChannel.channelInfo.id)).then((function(){t.target.classList.add("btn-success")})).catch((function(n){t.target.classList.remove("disabled"),e.$emit("errorAlert","Telegram test failed."),console.log(n)}))}}},u=f,d=n("2877"),h=Object(d["a"])(u,i,a,!1,null,null,null);e["default"]=h.exports},"2e96":function(t,e,n){},"41dc":function(t,e,n){"use strict";var i=n("2e96"),a=n.n(i);a.a},9897:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h2",{staticClass:"section-title"},[t._v(t._s(t.notificationChannel.title))]),0===t.envVarsToSet.length?n("div",[t._t("header"),t._t("configuration",[t.configVariableName?n("div",{staticClass:"form-group row my-4"},[n("label",{staticClass:"col-12 col-form-label",attrs:{for:"id_"+t.settingKey(t.configVariableName)}},[t._v(t._s(t.configVariableTitle))]),n("div",{staticClass:"col-12 col-form-label"},[n("saving-animation",{attrs:{errors:t.errorMessages[t.settingKey("config")],saving:t.saving[t.settingKey("config")]}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.configVariable,expression:"configVariable"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.configVariablePlaceholder,id:"id_"+t.settingKey(t.configVariableName)},domProps:{value:t.configVariable},on:{input:function(e){e.target.composing||(t.configVariable=e.target.value)}}})])],1)]):t._e()]),t.channelCreated&&t.showSettings?n("div",[n("notification-setting-switch",{attrs:{settingId:"enabled",settingTitle:"Enable notification",isHeader:!0,errorMessages:t.errorMessages,saving:t.saving,notificationChannel:t.notificationChannel,bottomDivider:!0},on:{updateNotificationChannel:function(e,n){return t.$emit("updateNotificationChannel",e,n)}}}),n("div",{class:{inactive:!t.notificationsEnabled}},[t._t("custom-settings"),t._l(t.notificationSettings,(function(e){return n("div",{key:e.id},["printer_status_change"===e.id?["web"===t.theme?n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-form-label"},[n("saving-animation",{attrs:{errors:[],saving:!1}},[n("div",{staticClass:"custom-control custom-checkbox form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.printerStatusChangeNotifications,expression:"printerStatusChangeNotifications"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"id_"+t.settingKey(e.id),disabled:!t.notificationsEnabled},domProps:{checked:Array.isArray(t.printerStatusChangeNotifications)?t._i(t.printerStatusChangeNotifications,null)>-1:t.printerStatusChangeNotifications},on:{change:function(e){var n=t.printerStatusChangeNotifications,i=e.target,a=!!i.checked;if(Array.isArray(n)){var o=null,s=t._i(n,o);i.checked?s<0&&(t.printerStatusChangeNotifications=n.concat([o])):s>-1&&(t.printerStatusChangeNotifications=n.slice(0,s).concat(n.slice(s+1)))}else t.printerStatusChangeNotifications=a}}}),n("label",{staticClass:"custom-control-label",attrs:{for:"id_"+t.settingKey(e.id)}},[t._v(" "+t._s(e.title)+" "),e.description?n("span",{staticClass:"text-muted setting-description"},[n("br"),t._v(t._s(e.description))]):t._e()])])])],1)]):n("div",[n("saving-animation",{attrs:{errors:[],saving:!1}},[n("div",{staticClass:"mobile-setting-item-wrapper"},[n("div",{staticClass:"setting-item-text"},[n("label",{attrs:{for:"id_"+t.settingKey(e.id)}},[t._v(" "+t._s(e.title)+" "),e.description?n("span",{staticClass:"text-muted setting-description"},[n("br"),t._v(t._s(e.description))]):t._e()])]),n("div",{staticClass:"setting-item-switch"},[n("onoff-toggle",{staticClass:"mb-0",attrs:{theme:t.theme,width:"ios"===t.theme?48:30,height:"ios"===t.theme?24:12,onColor:"ios"===t.theme?"var(--color-primary)":"var(--color-primary-muted)",offColor:"var(--color-divider)",borderColor:"var(--color-divider)",thumbColor:"ios"===t.theme?"#fff":"var(--color-primary)",disabled:!t.notificationsEnabled},model:{value:t.printerStatusChangeNotifications,callback:function(e){t.printerStatusChangeNotifications=e},expression:"printerStatusChangeNotifications"}})],1)])])],1)]:[n("notification-setting-switch",{attrs:{settingId:e.id,settingTitle:e.title,settingDescription:e.description,disabled:!t.notificationsEnabled,errorMessages:t.errorMessages,saving:t.saving,notificationChannel:t.notificationChannel},on:{updateNotificationChannel:function(e,n){return t.$emit("updateNotificationChannel",e,n)}}})],e.subcategories?n("div",t._l(e.subcategories,(function(e){return n("notification-setting-switch",{key:e.id,attrs:{settingId:e.id,settingTitle:e.title,settingDescription:e.description,isSubcategory:!0,disabled:!t.notificationsEnabled,errorMessages:t.errorMessages,saving:t.saving,notificationChannel:t.notificationChannel},on:{updateNotificationChannel:function(e,n){return t.$emit("updateNotificationChannel",e,n)}}})})),1):t._e()],2)}))],2)],1):t._e(),t._t("footer")],2):n("div",[n("p",{staticClass:"text-warning"},[t._v('Please configure the following variables in the ".env" file:')]),n("ul",{staticClass:"text-warning"},t._l(t.envVarsToSet,(function(e){return n("li",{key:e},[t._v(t._s(e))])})),0)])])},a=[],o=(n("4de4"),n("4fad"),n("fc11")),s=n("54f8"),r=n("d0af"),c=n("847e"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"web"===t.theme?n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-form-label",class:{"pl-5":t.isSubcategory}},[n("saving-animation",{attrs:{errors:t.errorMessages?t.errorMessages[t.settingKey(t.settingId)]:[],saving:!!t.saving&&t.saving[t.settingKey(t.settingId)]}},[n("div",{staticClass:"custom-control custom-checkbox form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.notificationChannel.channelInfo[t.settingId],expression:"notificationChannel.channelInfo[settingId]"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"id_"+t.settingKey(t.settingId),disabled:t.disabled},domProps:{checked:Array.isArray(t.notificationChannel.channelInfo[t.settingId])?t._i(t.notificationChannel.channelInfo[t.settingId],null)>-1:t.notificationChannel.channelInfo[t.settingId]},on:{change:[function(e){var n=t.notificationChannel.channelInfo[t.settingId],i=e.target,a=!!i.checked;if(Array.isArray(n)){var o=null,s=t._i(n,o);i.checked?s<0&&t.$set(t.notificationChannel.channelInfo,t.settingId,n.concat([o])):s>-1&&t.$set(t.notificationChannel.channelInfo,t.settingId,n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.notificationChannel.channelInfo,t.settingId,a)},function(e){return t.$emit("updateNotificationChannel",t.notificationChannel,[t.settingId])}]}}),n("label",{class:["custom-control-label",t.labelClass],attrs:{for:"id_"+t.settingKey(t.settingId)}},[t._v(" "+t._s(t.settingTitle)+" "),t.settingDescription?n("span",{staticClass:"text-muted setting-description"},[n("br"),t._v(t._s(t.settingDescription))]):t._e()])])])],1),t.bottomDivider?n("div",{staticClass:"col-12"},[n("hr",{staticClass:"my-1"})]):t._e()]):n("div",[n("saving-animation",{attrs:{errors:t.errorMessages?t.errorMessages[t.settingKey(t.settingId)]:[],saving:!!t.saving&&t.saving[t.settingKey(t.settingId)]}},[n("div",{staticClass:"mobile-setting-item-wrapper",class:{"is-subcategory":t.isSubcategory}},[n("div",{staticClass:"setting-item-text"},[n("label",{class:t.labelClass,attrs:{for:"id_"+t.settingKey(t.settingId)}},[t._v(" "+t._s(t.settingTitle)+" "),t.settingDescription?n("span",{staticClass:"text-muted setting-description"},[n("br"),t._v(t._s(t.settingDescription))]):t._e()])]),n("div",{staticClass:"setting-item-switch"},[n("onoff-toggle",{staticClass:"mb-0",attrs:{theme:t.theme,width:"ios"===t.theme?48:30,height:"ios"===t.theme?24:12,onColor:"ios"===t.theme?"var(--color-primary)":"var(--color-primary-muted)",offColor:"var(--color-divider)",borderColor:"var(--color-divider)",thumbColor:"ios"===t.theme?"#fff":"var(--color-primary)",disabled:t.disabled},on:{input:function(e){return t.$emit("updateNotificationChannel",t.notificationChannel,[t.settingId])}},model:{value:t.notificationChannel.channelInfo[t.settingId],callback:function(e){t.$set(t.notificationChannel.channelInfo,t.settingId,e)},expression:"notificationChannel.channelInfo[settingId]"}})],1)])])],1)},f=[],u=n("b279"),d=n("4f95"),h={name:"NotificationSettingSwitch",components:{SavingAnimation:c["a"]},props:{errorMessages:{type:Object||null,default:null},saving:{type:Object||null,default:null},notificationChannel:{type:Object,required:!0},settingId:{type:String,required:!0},settingTitle:{type:String,required:!0},settingDescription:{type:String},isSubcategory:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},bottomDivider:{type:Boolean,default:!1},isHeader:{type:Boolean,default:!1}},computed:{theme:function(){var t=Object(d["b"])();return t?"ios"===t?"ios":"material":"web"},labelClass:function(){return this.isHeader?"lg":""}},methods:{settingKey:function(t){return Object(u["a"])(this.notificationChannel,t)}}},g=h,p=(n("41dc"),n("2877")),m=Object(p["a"])(g,l,f,!1,null,"06fd8ffb",null),v=m.exports,b=[{id:"notify_on_failure_alert",title:"Failure alerts",description:"When possible failures are detected"},{id:"printer_status_change",title:"Printer status change",description:"Upon start/end/cancellation of a print job",subcategories:[{id:"notify_on_print_done",title:"When print is done",enabledByDefault:!0},{id:"notify_on_print_cancelled",title:"When print is cancelled",enabledByDefault:!1},{id:"notify_on_filament_change",title:"When filament runs out or needs a change",enabledByDefault:!0},{id:"notify_on_other_print_events",title:"When other event happens",description:"Such as start, pause, and resume",enabledByDefault:!1}]},{id:"notify_on_heater_status",title:"Heater status change",description:"Heater reached target or cooled down"}],C={name:"NotificationChannelTemplate",components:{SavingAnimation:c["a"],NotificationSettingSwitch:v},props:{errorMessages:{type:Object,required:!0},saving:{type:Object,required:!0},notificationChannel:{type:Object,required:!0},notificationSettings:{type:Array,default:function(){return b}},showSettings:{type:Boolean,default:!0},configVariableTitle:{type:String},configVariablePlaceholder:{type:String},configVariableName:{type:String}},data:function(){return{configVariable:null,configUpdateTimeout:null}},computed:{channelCreated:function(){return!!this.notificationChannel.channelInfo},notificationsEnabled:function(){return!!this.notificationChannel.channelInfo&&this.notificationChannel.channelInfo.enabled},envVarsToSet:function(){for(var t,e=(null===(t=this.notificationChannel.pluginInfo)||void 0===t?void 0:t.env_vars)||{},n=[],i=0,a=Object.entries(e);i<a.length;i++){var o=Object(r["a"])(a[i],2),s=o[0],c=o[1];c.is_required&&!c.is_set&&n.push(s)}return n},printerStatusChangeNotifications:{get:function(){if(!this.notificationChannel.channelInfo)return null;var t,e=this.notificationSettings.filter((function(t){return"printer_status_change"===t.id}))[0].subcategories,n=Object(s["a"])(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(this.notificationChannel.channelInfo[i.id])return!0}}catch(a){n.e(a)}finally{n.f()}return!1},set:function(t){if(t){var e,n=this.notificationSettings.filter((function(t){return"printer_status_change"===t.id}))[0].subcategories,i=[],a=Object(s["a"])(n);try{for(a.s();!(e=a.n()).done;){var o=e.value;o.enabledByDefault&&(this.notificationChannel.channelInfo[o.id]=!0,i.push(o.id))}}catch(d){a.e(d)}finally{a.f()}i.length&&this.$emit("updateNotificationChannel",this.notificationChannel,i)}else{var r,c=this.notificationSettings.filter((function(t){return"printer_status_change"===t.id}))[0].subcategories,l=[],f=Object(s["a"])(c);try{for(f.s();!(r=f.n()).done;){var u=r.value;this.notificationChannel.channelInfo[u.id]&&(this.notificationChannel.channelInfo[u.id]=!1,l.push(u.id))}}catch(d){f.e(d)}finally{f.f()}l.length&&this.$emit("updateNotificationChannel",this.notificationChannel,l)}}},theme:function(){var t=Object(d["b"])();return t?"ios"===t?"ios":"material":"web"}},created:function(){this.notificationChannel.channelInfo&&this.notificationChannel.channelInfo.config&&this.configVariableName?this.configVariable=this.notificationChannel.channelInfo.config[this.configVariableName]:this.configVariable=""},watch:{configVariable:function(t,e){null!==e&&(this.$emit("clearErrorMessages",this.settingKey("config")),this.updateConfig())}},methods:{settingKey:function(t){return Object(u["a"])(this.notificationChannel,t)},updateConfig:function(){var t=this;this.configUpdateTimeout&&clearTimeout(this.configUpdateTimeout);var e=Object(o["a"])({},this.configVariableName,this.configVariable);this.channelCreated?this.configUpdateTimeout=setTimeout((function(){t.configVariable?(t.notificationChannel.channelInfo.config=e,t.$emit("updateNotificationChannel",t.notificationChannel,["config"])):t.$emit("deleteNotificationChannel",t.notificationChannel)}),1e3):this.configVariable&&(this.configUpdateTimeout=setTimeout((function(){return t.$emit("createNotificationChannel",t.notificationChannel,e)}),1e3))}}},_=C,y=(n("f454"),Object(p["a"])(_,i,a,!1,null,"3d7815a5",null));e["a"]=y.exports},b811:function(t,e,n){},d226:function(t,e,n){!function(e,n){t.exports=n()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i={name:"vue-telegram-login",props:{mode:{type:String,required:!0,validator:function(t){return["callback","redirect"].includes(t)}},telegramLogin:{type:String,required:!0,validator:function(t){return t.endsWith("bot")||t.endsWith("Bot")}},redirectUrl:{type:String,default:""},requestAccess:{type:String,default:"read",validator:function(t){return["read","write"].includes(t)}},size:{type:String,default:"large",validator:function(t){return["small","medium","large"].includes(t)}},userpic:{type:Boolean,default:!0},radius:{type:String}},methods:{onTelegramAuth:function(t){this.$emit("callback",t)}},mounted:function(){var t=document.createElement("script");t.async=!0,t.src="https://telegram.org/js/telegram-widget.js?3",t.setAttribute("data-size",this.size),t.setAttribute("data-userpic",this.userpic),t.setAttribute("data-telegram-login",this.telegramLogin),t.setAttribute("data-request-access",this.requestAccess),this.radius&&t.setAttribute("data-radius",this.radius),"callback"===this.mode?(window.onTelegramAuth=this.onTelegramAuth,t.setAttribute("data-onauth","window.onTelegramAuth(user)")):t.setAttribute("data-auth-url",this.redirectUrl),this.$refs.telegram.appendChild(t)}},a=function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"telegram"})};a._withStripped=!0;var o=function(t,e,n,i,a,o,s,r){var c=typeof(t=t||{}).default;"object"!==c&&"function"!==c||(t=t.default);var l,f="function"==typeof t?t.options:t;if(e&&(f.render=e,f.staticRenderFns=n,f._compiled=!0),i&&(f.functional=!0),o&&(f._scopeId=o),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},f._ssrRegister=l):a&&(l=r?function(){a.call(this,this.$root.$options.shadowRoot)}:a),l)if(f.functional){f._injectStyles=l;var u=f.render;f.render=function(t,e){return l.call(e),u(t,e)}}else{var d=f.beforeCreate;f.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:f}}(i,a,[],!1,null,null,null);o.options.__file="src/vue-telegram-login.vue";var s=o.exports;n.d(e,"vueTelegramLogin",(function(){return s}))}])}))},f454:function(t,e,n){"use strict";var i=n("b811"),a=n.n(i);a.a}}]);
//# sourceMappingURL=chunk-c511ea36.js.map