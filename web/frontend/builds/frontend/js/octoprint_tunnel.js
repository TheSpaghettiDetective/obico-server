(function(t){function e(e){for(var r,i,o=e[0],l=e[1],c=e[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={octoprint_tunnel:0},s=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/static/frontend/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;s.push([7,"chunk-vendors"]),n()})({"0d29":function(t,e,n){t.exports=n.p+"img/detective-hour-inverse.png"},"17d7":function(t,e,n){t.exports=n.p+"img/octoprint-tunnel.png"},1807:function(t,e,n){"use strict";n("99af"),n("a15b");var r=n("0b49"),a=n.n(r),s=n("dd61"),i=n.n(s);e["a"]={publicTimelapse:function(){return"/api/v1/publictimelapse/"},printShotFeedback:function(t,e){return"/api/v1/printshotfeedbacks/".concat(t,"/?print_id=").concat(e)},print:function(t){return"/api/v1/prints/".concat(t,"/")},prints:function(){return"/api/v1/prints/"},printsBulkDelete:function(){return"/api/v1/prints/bulk_delete/"},printAlertOverwrite:function(t){return"/api/v1/prints/".concat(t,"/alert_overwrite/")},printers:function(){return"/api/v1/printers/"},printer:function(t){return"/api/v1/printers/".concat(t,"/")},printerAction:function(t,e){return"/api/v1/printers/".concat(t).concat(e)},pubPrinter:function(){return"/api/v1p/printer/"},gcodes:function(){return"/api/v1/gcodes/"},tunnelUsage:function(){return"/api/v1/tunnelusage/"},verificationCode:function(){return"/api/v1/onetimeverificationcodes/"},user:function(){return"/api/v1/users/me/"},sharedResources:function(t){return"/api/v1/sharedresources/?"+i()(a()(t),(function(t){return t.join("=")})).join("&")},sharedResource:function(t){return"/api/v1/sharedresources/".concat(t,"/")},printerControl:function(t){return"/printers/".concat(t,"/control/")},printerWebSocket:function(t){return"/ws/web/".concat(t,"/")},printerSharedWebSocket:function(t){return"/ws/share_token/web/".concat(t,"/")},printerWizard:function(t){return"/printers/wizard/?printerId=".concat(t)}}},"3c33":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r=function(t,e){var n=localStorage.getItem(t)||e;try{return JSON.parse(n)}catch(r){return n}},a=function(t,e){return localStorage.setItem(t,e)}},"3f20":function(t,e,n){"use strict";var r=n("4caf"),a=n.n(r);a.a},"4caf":function(t,e,n){},6368:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("a026"),a=n("f357"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("pull-to-reveal",[r("navbar",{attrs:{"view-name":"app.views.tunnel_views.tunnel"}})],1),r("h4",{staticClass:"text-center p-2"},[r("img",{staticStyle:{height:"1.1em","margin-right":"0.75em"},attrs:{src:n("17d7")}}),t._v("OctoPrint Secure Tunnel ")]),t.isPro?t._e():r("div",{staticClass:"text-center pb-2"},[t._m(0),t._v(" "),r("span",{class:t.usageClass},[t._v(t._s(t.usageMTD)+"/"+t._s(t.humanizedUsageCap))]),t.overage?r("div",[t._v("Your month-to-date tunneling usage is over the Free plan limit. Upgrade to the Pro plan to "),r("a",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",href:"/ent/pricing/"}},[t._v("Get Unlimited Usage")])]):t._e()]),r("div",[t.printerId?r("iframe",{staticStyle:{width:"100%",height:"1400px",background:"#FFFFFF"},attrs:{src:t.iframeUrl()}}):t._e()])],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"text-muted"},[t._v("Month-To-Date Usage/Free Limit("),n("a",{attrs:{href:"https://www.thespaghettidetective.com/docs/octoprint-tunneling/#is-octoprint-tunneling-free-to-all-users"}},[t._v("?")]),t._v("):")])}],o=(n("a9e3"),n("bc3a")),l=n.n(o),c=n("49d5"),u=n.n(c),p=n("1807"),d=n("b768"),f=n("8ffe"),v={name:"OctoPrintTunnelPage",components:{PullToReveal:d["a"],Navbar:f["a"]},props:{printerId:{type:Number},isPro:{type:Boolean},usageCap:{type:Number}},data:function(){return{bytesMTD:null}},computed:{usageClass:function(){return{"text-success":this.bytesMTD<.8*this.usageCap,"text-warning":this.bytesMTD>=.8*this.usageCap&&this.bytesMTD<this.usageCap,"text-danger":this.bytesMTD>=this.usageCap}},usageMTD:function(){return u()(this.bytesMTD)},humanizedUsageCap:function(){return u()(this.usageCap)},overage:function(){return this.bytesMTD>=this.usageCap}},mounted:function(){this.$swal.DismissableToast({html:'<div class="p-1">It may take long time for OctoPrint page to load as it is securely tunneled via The Spaghetti Detective server.</div><div class="p-1"><a target="_blank" href="https://www.thespaghettidetective.com/docs/octoprint-tunneling/#is-octoprint-tunneling-secure">Learn more about OctoPrint Tunneling\'s security and page load speed. <i class="fas fa-external-link-alt"></i></a></div>',customClass:{container:"dark-backdrop"}},"octoprint-tunnel.warning");var t=this,e=function(){l.a.get(p["a"].tunnelUsage()).then((function(e){t.bytesMTD=e.data.total}))};setInterval(e,15e3),setTimeout(e,4e3)},methods:{iframeUrl:function(){return"/octoprint/".concat(this.printerId,"/")}}},h=v,m=(n("3f20"),n("2877")),g=Object(m["a"])(h,s,i,!1,null,"f5c82c2c",null),b=g.exports,y=n("785f");Object(y["a"])(r["default"]),r["default"].use(a["a"]),new r["default"]({components:{OctoPrintTunnelPage:b}}).$mount("#octoprint-tunnel-mount")},7:function(t,e,n){t.exports=n("6368")},"706b":function(t,e,n){},"785f":function(t,e,n){"use strict";n("99af"),n("fb6a"),n("b0c0"),n("d3b7"),n("ac1f"),n("25f0"),n("5319");var r=n("0122"),a=/(?:^|[-_/])(\w)/g,s="root",i="anonymous component",o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/,l=function(t){var e=o.exec(t);return e?e.slice(1):[]},c=function(t,e){var n=l(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},u=function(t){if(!t)return i;if(t.$root===t)return s;if(!t.$options)return i;if(t.$options.name)return t.$options.name;if(t.$options._componentTag)return t.$options._componentTag;if(t.$options.__file){var e=t.$options.__file.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"),n=c(e,".vue");return n.replace(a,(function(t,e){return e?e.toUpperCase():""}))}return i},p=function t(e,n,a,s,i,o){var l=0;for(var c in n){if(l+=1,l>o)break;"object"==Object(r["a"])(n[c])?i>s&&t(e,n[c],a+"."+c,s+1,i,o):e[a+"."+c]=n[c]}},d=function(t){var e=t.config.errorHandler;t.config.errorHandler=function(n,r,a){if(window.Sentry){var s={},i=r;if(r._original&&(i=r._original),i)try{s.componentName=u(i),p(s,JSON.parse(JSON.stringify(i.$options.propsData)),"props",0,2,10)}catch(o){console.log("Unable to extract metadata from Vue component.")}a&&(s.lifecycleHook=a),setTimeout((function(){window.Sentry.getCurrentHub().withScope((function(t){t.setContext("vue",s),window.Sentry.getCurrentHub().captureException(n)}))}))}"function"===typeof e&&e.call(t,n,r,a),t.util&&t.util.warn("Error in ".concat(a,': "').concat(n.toString(),'"'),r),console.error(n)}};e["a"]=d},"8a45":function(t,e,n){t.exports=n.p+"img/logo-inverted.png"},"8ffe":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark static-top flex-column"},[r("div",{staticClass:"container"},[r("a",{staticClass:"navbar-brand",attrs:{href:"/printers/"}},[r("img",{staticStyle:{height:"32px"},attrs:{src:n("8a45"),alt:"The Spaghetti Detective"}})]),r("button",{ref:"mobileDropdown",staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"}},[r("span",{staticClass:"navbar-toggler-icon"})]),r("div",{ref:"mobileDropdownContent",staticClass:"collapse navbar-collapse",attrs:{id:"navbarResponsive"}},[r("ul",{staticClass:"navbar-nav"},[t.user?r("li",{staticClass:"nav-item",class:{active:t.viewName.includes("printers")}},[r("a",{staticClass:"nav-link",attrs:{href:"/printers/"}},[t._v("Printer ")])]):t._e(),t.user?r("li",{staticClass:"nav-item",class:{active:t.viewName.includes("prints")}},[r("a",{staticClass:"nav-link",attrs:{href:"/prints/"}},[t._v("Time-lapse ")])]):t._e(),t.user?r("li",{staticClass:"nav-item",class:{active:t.viewName.includes("gcodes")}},[r("a",{staticClass:"nav-link",attrs:{href:"/gcodes/"}},[t._v("G-Code ")])]):t._e(),t.user?t._e():r("li",{staticClass:"nav-item",class:{active:"publictimelapse_list"===t.viewName}},[r("a",{staticClass:"nav-link glowing",attrs:{href:"/publictimelapses/"}},[t._v("Spaghetti Gallery")])]),t.isEnt?r("li",{staticClass:"nav-item",class:{active:"pricing"===t.viewName}},[r("a",{staticClass:"nav-link",attrs:{href:"/ent/pricing/"}},[t._v("Pricing")])]):t._e(),t._m(0),t._m(1)]),r("ul",{staticClass:"navbar-nav ml-auto"},[t.user?t._e():r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link",attrs:{href:"/accounts/login/"}},[t._v("Sign In")])]),!t.user&&t.allowSignUp?r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link",attrs:{href:"/accounts/signup/"}},[t._v("Sign up")])]):t._e(),t.isEnt&&t.user?r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link badge-btn",attrs:{href:"/ent/subscription/#detective-hour-balance"}},[r("img",{attrs:{src:n("0d29")}}),r("span",{staticClass:"badge badge-light",attrs:{id:"user-credits"}},[t._v(t._s(t.dhBadgeNum))]),r("span",{staticClass:"sr-only"},[t._v("Detective Hours")])])]):t._e(),t.user?r("li",{ref:"accountDropdown",staticClass:"nav-item dropdown"},[r("a",{staticClass:"nav-link dropdown-toggle user-menu",attrs:{"data-toggle":"dropdown",href:"#",id:t.user.id,"aria-expanded":"false"}},[t._v(" "+t._s(t.user.first_name||t.user.email)+" "),r("span",{staticClass:"caret"})]),r("div",{ref:"accountDropdownContent",staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"themes"}},[t._m(2),t.isEnt?r("a",{staticClass:"dropdown-item",attrs:{href:"/ent/subscription/"}},[r("i",{staticClass:"far fa-user-circle"}),t._v("Account")]):t._e(),r("div",{staticClass:"dropdown-divider"}),t._m(3)])]):t._e()])])])]),t.needsEmailVerification?r("div",{staticClass:"alert alert-warning text-center",attrs:{role:"alert"}},[t._v(" You will not get notified by email on print failure, as your primary email address is not verified. "),r("a",{attrs:{href:"/accounts/email/"}},[t._v("Verify your email address.")])]):t._e()])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"https://www.thespaghettidetective.com/help"}},[t._v("Help")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"https://discord.gg/hsMwGpD"}},[t._v("Forum")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"dropdown-item",attrs:{href:"/user_preferences/"}},[n("i",{staticClass:"fas fa-sliders-h"}),t._v("Preferences")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"dropdown-item",attrs:{href:"/accounts/logout/"}},[n("i",{staticClass:"fas fa-sign-out-alt"}),t._v("Log out")])}],s=n("c1df"),i=n.n(s),o={name:"Navbar",data:function(){return{user:null,allowSignUp:!1,isEnt:!1}},props:{viewName:{default:function(){return""},type:String}},created:function(){var t=JSON.parse(document.querySelector("#settings-json").text),e=t.ACCOUNT_ALLOW_SIGN_UP,n=t.IS_ENT;this.allowSignUp=!!e,this.isEnt=!!n,this.user=JSON.parse(document.querySelector("#user-json").text)},computed:{dhBadgeNum:function(){return this.user&&this.user.is_dh_unlimited?"âˆž":Math.round(this.user.dh_balance)},needsEmailVerification:function(){if(!this.user)return!1;var t=i()(this.user.date_joined).isBefore(i()().subtract(15,"days"));return this.isEnt&&!this.user.is_primary_email_verified&&t}},methods:{hideDropdowns:function(){var t=this.$refs.accountDropdown;t.classList.contains("show")&&(t.classList.remove("show"),this.$refs.accountDropdownContent.classList.remove("show"));var e=this.$refs.mobileDropdown;e.getAttribute("aria-expanded")&&(e.classList.add("collapsed"),this.$refs.mobileDropdownContent.classList.remove("show"))}}},l=o,c=(n("fda5"),n("2877")),u=Object(c["a"])(l,r,a,!1,null,"60e69dd2",null);e["a"]=u.exports},b768:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"pullToRevealWrapper",staticClass:"wrapper"},[n("div",[n("div",{staticClass:"pull-to-reveal"},[t.enable?t._t("default"):t._e()],2),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showEdge,expression:"showEdge"}],staticClass:"showing-edge"}),n("div",{staticClass:"spaceholder"})]),n("div",{ref:"staticWrapper"},[t.enable?t._e():t._t("default")],2)])},a=[],s={name:"PullToReveal",props:{showEdge:{default:function(){return!1},type:Boolean},shiftContent:{default:function(){return!0},type:Boolean},enable:{default:function(){return!1},type:Boolean}},data:function(){return{status:"closed",animationTime:.5}},watch:{enable:function(t){t?(this.destroyDisabled(),this.initEnabled()):(this.destroyEnabled(),this.initDisabled())}},mounted:function(){this.enable?this.initEnabled():this.initDisabled()},destroyed:function(){this.enable?this.destroyEnabled():this.destroyDisabled()},methods:{initEnabled:function(){window.addEventListener("scroll",this.handleScroll),document.querySelector("body").style.minHeight="101vh";var t=this.$refs.pullToRevealWrapper.querySelector(".pull-to-reveal"),e=this.$refs.pullToRevealWrapper.querySelector(".spaceholder"),n=this.animationTime;t.style.transition="all ".concat(n,"s"),e.style.transition="all ".concat(n,"s"),0===window.scrollY&&window.scrollBy({top:1,behavior:"smooth"}),window.onload=function(){var e=parseInt(window.getComputedStyle(t).height);t.style.top="-".concat(2*e,"px")}},destroyEnabled:function(){window.removeEventListener("scroll",this.handleScroll),document.querySelector("body").style.minHeight="";var t=this.$refs.pullToRevealWrapper.querySelector(".pull-to-reveal"),e=this.$refs.pullToRevealWrapper.querySelector(".spaceholder");t.style.transition="none",e.style.transition="none",t.style.top="-999px"},initDisabled:function(){var t=this.$refs.pullToRevealWrapper.querySelector(".showing-edge");t.style.display="none";var e=this.$refs.staticWrapper;e.style.position="absolute",e.style.width="100%",e.style.top="0",e.style.left="0",e.style.zIndex="1";var n=parseInt(window.getComputedStyle(e).height);document.querySelector("body").style.paddingTop="".concat(n,"px")},destroyDisabled:function(){var t=this.$refs.pullToRevealWrapper.querySelector(".showing-edge");t.style.display="block";var e=this.$refs.staticWrapper;e.style.display="none",document.querySelector("body").style.paddingTop=0},handleScroll:function(){var t=window.pageYOffset,e=this.$refs.pullToRevealWrapper.querySelector(".pull-to-reveal"),n=parseInt(window.getComputedStyle(e).height);if(0===t){if("opened"===this.status)return;e.style.top=0,this.status="opened",this.shiftContent&&(this.$refs.pullToRevealWrapper.querySelector(".spaceholder").style.height="".concat(n,"px"))}else{if("closed"===this.status)return;this.$emit("hide"),e.style.top="-".concat(2*n,"px"),this.status="closed",this.shiftContent&&(this.$refs.pullToRevealWrapper.querySelector(".spaceholder").style.height=0)}}}},i=s,o=(n("f09e"),n("2877")),l=Object(o["a"])(i,r,a,!1,null,"02d7db9c",null);e["a"]=l.exports},c07c:function(t,e,n){},f09e:function(t,e,n){"use strict";var r=n("706b"),a=n.n(r);a.a},f357:function(t,e,n){"use strict";var r=n("f3f3"),a=n("a026"),s=n("5886"),i=n("3c33"),o=function(t,e,n){var s=document.createElement("div"),i=new a["default"]({render:function(n){return n(t,{props:e})}}).$mount(s);return a["default"].swal(Object(r["a"])(Object(r["a"])({},n),{},{customClass:{container:"dark-backdrop"},html:'<div id="replace-here">Placeholder</div>',onBeforeOpen:function(t){t.querySelector("#replace-here").replaceWith(i.$el)},onDestroy:function(){i.$destroy(),s.remove()}}))},l=function(t,e,n){return a["default"].swal(Object(r["a"])(Object(r["a"])({},n),{},{customClass:{container:"dark-backdrop"},html:'<div id="replace-here">Placeholder</div>',onBeforeOpen:function(e){e.querySelector("#replace-here").replaceWith(t)}}))},c=function(t,e){t.use(s["a"],e);var n=t.swal.mixin({title:"Are you sure?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",customClass:{container:"dark-backdrop"}}),a=t.swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3}),c=function(e,n){if(!Object(i["a"])(n,!1)){var a=Object(r["a"])(Object(r["a"])({},e),{},{position:"top-end",confirmButtonText:"Gotcha! Don't show this again."});return t.swal(a).then((function(t){t.value&&(Object(i["b"])(n,!0),console.log(t))}))}};t.prototype.$swal["openModalWithComponent"]=o,t.prototype.$swal["openModalWithElement"]=l,t.prototype.$swal["Confirm"]=n,t.prototype.$swal["Toast"]=a,t.prototype.$swal["DismissableToast"]=c};e["a"]={install:c}},fda5:function(t,e,n){"use strict";var r=n("c07c"),a=n.n(r);a.a}});
//# sourceMappingURL=octoprint_tunnel.js.map